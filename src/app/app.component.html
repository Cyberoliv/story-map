<mat-form-field>
  <mat-label>Jiras par colonne</mat-label>
  <mat-select [(value)]="jiraPerRow">
    <mat-option value=1>1</mat-option>
    <mat-option value=2>2</mat-option>
    <mat-option value=3>3</mat-option>
    <mat-option value=4>4</mat-option>
    <mat-option value=5>5</mat-option>
  </mat-select>
</mat-form-field>
<p>
  {{jiraPerRow}} - {{jiraDistribution()}}
</p>

<table mat-table #table [dataSource]="dataSource" cdkDropList [cdkDropListData]="dataSource"
	(cdkDropListDropped)="dropTable($event)" class="mat-elevation-z8">

	<ng-container *ngFor="let column of fixColumns" matColumnDef="{{column.name}}">
		<th mat-header-cell *matHeaderCellDef>{{column.label}}</th>
		<td mat-cell *matCellDef="let element" 
      (contextmenu)="onContextMenu($event, element)"
      cdkDragHandle style="pointer-events: all;" >{{element[column.name]}}</td>
	</ng-container>

	<ng-container *ngFor="let sprint of sprintList" matColumnDef="{{sprint}}">
		<th [ngStyle]="{'min-width.px': jiraDistribution()}" mat-header-cell *matHeaderCellDef>{{sprint}}</th>
		<td mat-cell *matCellDef="let element" fxLayout="row wrap" fxLayoutGap="5px">
  	<jira-card [data]=jira *ngFor="let jira of getJirasInEpicBySprint(element.epicName, sprint)"></jira-card>
		</td>
	</ng-container>

	<tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
	<tr mat-row *matRowDef="let row; columns: displayedColumns;" 
    cdkDragLockAxis="y" cdkDrag [cdkDragData]="row" style="pointer-events: none;"></tr>
</table>

<div style="visibility: hidden; position: fixed" [style.left]="contextMenuPosition.x"
	[style.top]="contextMenuPosition.y" [matMenuTriggerFor]="contextMenu">
</div>
<mat-menu #contextMenu="matMenu">
	<ng-template matMenuContent let-item="item">
		<button mat-menu-item (click)="sendTop(item)">Déplacer tout en haut</button>
		<button mat-menu-item (click)="sendBottom(item)">Déplacer tout en bas</button>
	</ng-template>
</mat-menu>